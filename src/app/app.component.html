<ion-app>
  <ion-menu contentId="main-content" menuId="main-menu">
    <ion-header>
      <ion-toolbar class="menu-header">
        <ion-title>Menu</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <!-- Informations utilisateur -->
      <div class="user-info" *ngIf="userName">
        <ion-item lines="none" class="user-item">
          <ion-icon name="person" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h2>{{ userName }}</h2>
            <p>{{ 'common.welcome' | translate }}</p>
          </ion-label>
        </ion-item>
      </div>
      
      <!-- Language Switcher -->
      <div class="language-switcher">
        <ion-list lines="none">
          <ion-item-divider>
            <ion-icon name="globe" slot="start"></ion-icon>
            <ion-label>Langue</ion-label>
          </ion-item-divider>
          <ion-item *ngFor="let lang of languages" button (click)="changeLanguage(lang)" [class.active]="currentLanguage === lang">
            <ion-label>{{ lang === 'en' ? 'English' : (lang === 'fr' ? 'Français' : 'العربية') }}</ion-label>
            <ion-icon *ngIf="currentLanguage === lang" name="checkmark" slot="end" color="primary"></ion-icon>
          </ion-item>
        </ion-list>
      </div>
      
      <ion-list>
        <ion-menu-toggle auto-hide="false">
          <ion-item 
            button 
            routerLink="/tabs/tab1" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/tabs/tab1')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="home" slot="start"></ion-icon>
            <ion-label>{{ 'navigation.dashboard' | translate }}</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/dashboard" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/dashboard')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="bar-chart" slot="start"></ion-icon>
            <ion-label>{{ 'navigation.dashboard' | translate }}</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/utilisateurs" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/utilisateurs')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="people" slot="start"></ion-icon>
            <ion-label>{{ 'navigation.users' | translate }}</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/clients" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/clients')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="person" slot="start"></ion-icon>
            <ion-label>{{ 'navigation.clients' | translate }}</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/articles" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/articles')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="cube" slot="start"></ion-icon>
            <ion-label>{{ 'navigation.articles' | translate }}</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/reservations" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/reservations')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="calendar" slot="start"></ion-icon>
            <ion-label>{{ 'navigation.reservations' | translate }}</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/paiements" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/paiements')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="wallet" slot="start"></ion-icon>
            <ion-label>{{ 'navigation.payments' | translate }}</ion-label>
          </ion-item>
          <ion-item 
            button 
            (click)="toggleParametres($event)"
            [class.menu-item-active]="isRouteActive('/parametres')"
            [detail]="false">
            <ion-icon name="settings" slot="start"></ion-icon>
            <ion-label>{{ 'navigation.parameters' | translate }}</ion-label>
            <ion-icon 
              [name]="parametresExpanded ? 'chevron-up' : 'chevron-down'" 
              slot="end">
            </ion-icon>
          </ion-item>
          
          <!-- Sous-menu Paramètres -->
          <ng-container *ngIf="parametresExpanded">
            <ion-item 
              button 
              routerLink="/parametres/roles" 
              routerDirection="root"
              [class.menu-item-active]="isRouteActive('/parametres/roles')"
              routerLinkActive="menu-item-active"
              class="submenu-item">
              <ion-icon name="shield-checkmark" slot="start"></ion-icon>
              <ion-label>{{ 'navigation.roles' | translate }}</ion-label>
            </ion-item>
            <ion-item 
              button 
              routerLink="/parametres/tailles" 
              routerDirection="root"
              [class.menu-item-active]="isRouteActive('/parametres/tailles')"
              routerLinkActive="menu-item-active"
              class="submenu-item">
              <ion-icon name="resize" slot="start"></ion-icon>
              <ion-label>{{ 'navigation.sizes' | translate }}</ion-label>
            </ion-item>
            <ion-item 
              button 
              routerLink="/parametres/categories" 
              routerDirection="root"
              [class.menu-item-active]="isRouteActive('/parametres/categories')"
              routerLinkActive="menu-item-active"
              class="submenu-item">
              <ion-icon name="grid" slot="start"></ion-icon>
              <ion-label>{{ 'navigation.categories' | translate }}</ion-label>
            </ion-item>
            <ion-item 
              button 
              (click)="navigateToSociete()"
              [class.menu-item-active]="isRouteActive('/parametres/societes')"
              class="submenu-item">
              <ion-icon name="business" slot="start"></ion-icon>
              <ion-label>{{ 'navigation.companies' | translate }}</ion-label>
            </ion-item>
          </ng-container>
          <ion-item button (click)="logout()">
            <ion-icon name="log-out" slot="start"></ion-icon>
            <ion-label>{{ 'common.logout' | translate }}</ion-label>
          </ion-item>
        </ion-menu-toggle>
      </ion-list>
    </ion-content>
  </ion-menu>
  <ion-router-outlet id="main-content"></ion-router-outlet>
</ion-app>
