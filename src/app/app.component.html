<ion-app>
  <ion-menu contentId="main-content" menuId="main-menu">
    <ion-header>
      <ion-toolbar class="menu-header">
        <ion-title>Menu</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <!-- Informations utilisateur -->
      <div class="user-info" *ngIf="userName">
        <ion-item lines="none" class="user-item">
          <ion-icon name="person" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h2>{{ userName }}</h2>
            <p>Utilisateur connecté</p>
          </ion-label>
        </ion-item>
      </div>
      
      <ion-list>
        <ion-menu-toggle auto-hide="false">
          <ion-item 
            button 
            routerLink="/tabs/tab1" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/tabs/tab1')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="home" slot="start"></ion-icon>
            <ion-label>Accueil</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/utilisateurs" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/utilisateurs')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="people" slot="start"></ion-icon>
            <ion-label>Utilisateurs</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/clients" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/clients')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="person" slot="start"></ion-icon>
            <ion-label>Clients</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/articles" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/articles')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="cube" slot="start"></ion-icon>
            <ion-label>Articles</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/reservations" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/reservations')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="calendar" slot="start"></ion-icon>
            <ion-label>Réservations</ion-label>
          </ion-item>
          <ion-item 
            button 
            routerLink="/paiements" 
            routerDirection="root"
            [class.menu-item-active]="isRouteActive('/paiements')"
            routerLinkActive="menu-item-active"
            [routerLinkActiveOptions]="{exact: false}">
            <ion-icon name="wallet" slot="start"></ion-icon>
            <ion-label>Paiements</ion-label>
          </ion-item>
          <ion-item 
            button 
            (click)="toggleParametres($event)"
            [class.menu-item-active]="isRouteActive('/parametres')"
            [detail]="false">
            <ion-icon name="settings" slot="start"></ion-icon>
            <ion-label>Paramètres</ion-label>
            <ion-icon 
              [name]="parametresExpanded ? 'chevron-up' : 'chevron-down'" 
              slot="end">
            </ion-icon>
          </ion-item>
          
          <!-- Sous-menu Paramètres -->
          <ng-container *ngIf="parametresExpanded">
            <ion-item 
              button 
              routerLink="/parametres/roles" 
              routerDirection="root"
              [class.menu-item-active]="isRouteActive('/parametres/roles')"
              routerLinkActive="menu-item-active"
              class="submenu-item">
              <ion-icon name="shield-checkmark" slot="start"></ion-icon>
              <ion-label>Rôles</ion-label>
            </ion-item>
            <ion-item 
              button 
              routerLink="/parametres/tailles" 
              routerDirection="root"
              [class.menu-item-active]="isRouteActive('/parametres/tailles')"
              routerLinkActive="menu-item-active"
              class="submenu-item">
              <ion-icon name="resize" slot="start"></ion-icon>
              <ion-label>Tailles</ion-label>
            </ion-item>
            <ion-item 
              button 
              routerLink="/parametres/categories" 
              routerDirection="root"
              [class.menu-item-active]="isRouteActive('/parametres/categories')"
              routerLinkActive="menu-item-active"
              class="submenu-item">
              <ion-icon name="grid" slot="start"></ion-icon>
              <ion-label>Catégories</ion-label>
            </ion-item>
            <ion-item 
              button 
              routerLink="/parametres/societes" 
              routerDirection="root"
              [class.menu-item-active]="isRouteActive('/parametres/societes')"
              routerLinkActive="menu-item-active"
              class="submenu-item">
              <ion-icon name="business" slot="start"></ion-icon>
              <ion-label>Sociétés</ion-label>
            </ion-item>
          </ng-container>
          <ion-item button (click)="logout()">
            <ion-icon name="log-out" slot="start"></ion-icon>
            <ion-label>Déconnexion</ion-label>
          </ion-item>
        </ion-menu-toggle>
      </ion-list>
    </ion-content>
  </ion-menu>
  <ion-router-outlet id="main-content"></ion-router-outlet>
</ion-app>
