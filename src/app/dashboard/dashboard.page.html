<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-menu-button slot="start"></ion-menu-button>
    <ion-title>
      {{ 'dashboard.title' | translate }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">{{ 'dashboard.title' | translate }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Loading state -->
  <div class="loading-container" *ngIf="isLoading">
    <ion-spinner></ion-spinner>
    <p>{{ 'common.loading' | translate }}</p>
  </div>

  <!-- Onglets principaux -->
  <div class="dashboard-container" *ngIf="!isLoading">
    <ion-segment [value]="selectedTab" (ionChange)="onTabChange($event)" class="main-tabs-segment">
      <ion-segment-button value="revenus">
        <ion-icon name="wallet"></ion-icon>
        <ion-label>{{ 'dashboard.income' | translate }}</ion-label>
      </ion-segment-button>
      <ion-segment-button value="articles">
        <ion-icon name="cube"></ion-icon>
        <ion-label>{{ 'dashboard.articles' | translate }}</ion-label>
      </ion-segment-button>
      <ion-segment-button value="entrants">
        <ion-icon name="arrow-up"></ion-icon>
        <ion-label>{{ 'dashboard.incoming' | translate }}</ion-label>
      </ion-segment-button>
      <ion-segment-button value="sortants">
        <ion-icon name="arrow-down"></ion-icon>
        <ion-label>{{ 'dashboard.outgoing' | translate }}</ion-label>
      </ion-segment-button>
    </ion-segment>

    <!-- Onglet: Revenus -->
    <div class="tab-content" *ngIf="selectedTab === 'revenus'">
      <!-- Filtres -->
      <ion-card class="filter-card">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="search" slot="start"></ion-icon>
            {{ 'dashboard.filterIncome' | translate }}
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <!-- Type de filtre -->
          <ion-segment [value]="filterType" (ionChange)="onFilterTypeChange($event)" class="filter-segment">
            <ion-segment-button value="jour">
              <ion-icon name="calendar"></ion-icon>
              <ion-label>{{ 'dashboard.singleDay' | translate }}</ion-label>
            </ion-segment-button>
            <ion-segment-button value="periode">
              <ion-icon name="bar-chart"></ion-icon>
              <ion-label>{{ 'dashboard.period' | translate }}</ion-label>
            </ion-segment-button>
          </ion-segment>

          <!-- Filtre par jour unique -->
          <div class="filter-content" *ngIf="filterType === 'jour'">
            <ion-item lines="full" class="filter-item">
              <ion-label position="stacked">{{ 'dashboard.selectDate' | translate }}</ion-label>
              <ion-input
                type="date"
                [value]="selectedDate"
                (ionInput)="selectedDate = $event.detail.value ?? selectedDate; onDateChange()"
                [placeholder]="'dashboard.selectDate' | translate">
              </ion-input>
            </ion-item>
            <p class="filter-hint">{{ 'dashboard.incomeGenerated' | translate }} {{ formatDate(selectedDate) }}</p>
          </div>

          <!-- Filtre par période -->
          <div class="filter-content" *ngIf="filterType === 'periode'">
            <ion-item lines="full" class="filter-item">
              <ion-label position="stacked">{{ 'dashboard.startDate' | translate }}</ion-label>
              <ion-input
                type="date"
                [value]="dateDebut"
                (ionInput)="dateDebut = $event.detail.value ?? dateDebut; onPeriodeChange()"
                [placeholder]="'dashboard.startDate' | translate">
              </ion-input>
            </ion-item>
            <ion-item lines="full" class="filter-item">
              <ion-label position="stacked">{{ 'dashboard.endDate' | translate }}</ion-label>
              <ion-input
                type="date"
                [value]="dateFin"
                (ionInput)="dateFin = $event.detail.value ?? dateFin; onPeriodeChange()"
                [placeholder]="'dashboard.endDate' | translate">
              </ion-input>
            </ion-item>
            <p class="filter-hint">
              {{ 'dashboard.incomeFromTo' | translate }} {{ formatDateShort(dateDebut) }} {{ 'dashboard.to' | translate }} {{ formatDateShort(dateFin) }}
            </p>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Statistiques financières -->
      <ion-card class="stat-card stat-card-primary">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="wallet" slot="start"></ion-icon>
            <span *ngIf="filterType === 'jour'">{{ 'dashboard.incomeOn' | translate }} {{ formatDate(selectedDate) }}</span>
            <span *ngIf="filterType === 'periode'">{{ 'dashboard.incomePeriod' | translate }}</span>
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="stat-content-large">
            <div class="stat-value">
              <h1>{{ formatMontant(revenus) }}</h1>
              <p class="stat-description" *ngIf="filterType === 'jour'">
                {{ nombrePaiements }} {{ 'dashboard.paymentsRecorded' | translate }}
              </p>
              <p class="stat-description" *ngIf="filterType === 'periode'">
                {{ nombrePaiements }} {{ 'dashboard.paymentsPeriod' | translate }}
              </p>
              <p class="stat-date-range" *ngIf="filterType === 'periode'">
                {{ 'dashboard.from' | translate }} {{ formatDateShort(dateDebut) }} {{ 'dashboard.to' | translate }} {{ formatDateShort(dateFin) }}
              </p>
              <p class="stat-date-range" *ngIf="filterType === 'jour'">
                {{ formatDate(selectedDate) }}
              </p>
            </div>
            <div class="stat-icon-large">
              <ion-icon name="wallet" color="primary"></ion-icon>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Graphique de progression du chiffre d'affaires -->
      <ion-card class="stat-card chart-card">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="trending-up" slot="start"></ion-icon>
            {{ 'dashboard.revenueProgress' | translate }}
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <!-- Sélecteur de période pour le graphique -->
          <ion-segment [value]="chartType" (ionChange)="onChartTypeChange($event)" class="chart-segment">
            <ion-segment-button value="jour">
              <ion-label>{{ 'dashboard.day' | translate }}</ion-label>
            </ion-segment-button>
            <ion-segment-button value="semaine">
              <ion-label>{{ 'dashboard.week' | translate }}</ion-label>
            </ion-segment-button>
            <ion-segment-button value="mois">
              <ion-label>{{ 'dashboard.month' | translate }}</ion-label>
            </ion-segment-button>
            <ion-segment-button value="annee">
              <ion-label>{{ 'dashboard.year' | translate }}</ion-label>
            </ion-segment-button>
          </ion-segment>
          
          <!-- Sélecteur de date unique pour tous les types -->
          <div class="chart-date-selector">
            <div class="filter-item-wrapper">
              <ion-item lines="none" class="filter-item">
                <ion-label position="stacked">
                  <ion-icon name="calendar" style="margin-right: 6px; vertical-align: middle; font-size: 16px;"></ion-icon>
                  {{ 'dashboard.selectReferenceDate' | translate }}
                </ion-label>
                <ion-input
                  type="date"
                  [value]="selectedDateChart"
                  (ionInput)="onChartDateChange($event)"
                  [placeholder]="'dashboard.selectDate' | translate">
                </ion-input>
              </ion-item>
              <p class="filter-hint" *ngIf="chartType === 'jour'">
                {{ 'dashboard.showLast30Days' | translate }}
              </p>
              <p class="filter-hint" *ngIf="chartType === 'semaine'">
                {{ 'dashboard.showLast12Weeks' | translate }}
              </p>
              <p class="filter-hint" *ngIf="chartType === 'mois'">
                {{ 'dashboard.showLast12Months' | translate }}
              </p>
              <p class="filter-hint" *ngIf="chartType === 'annee'">
                {{ 'dashboard.showLast5Years' | translate }}
              </p>
            </div>
          </div>
          
          <!-- Conteneur du graphique -->
          <div class="chart-container">
            <canvas id="revenueChart"></canvas>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Meilleur jour de la semaine -->
      <ion-card class="stat-card stat-card-info">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="star" slot="start"></ion-icon>
            {{ 'dashboard.bestDayWeek' | translate }}
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="stat-content-large">
            <div class="stat-value">
              <h2 class="jour-nom">{{ meilleurJour.jour }}</h2>
              <h1>{{ formatMontant(meilleurJour.moyenne) }}</h1>
              <p class="stat-description">
                {{ 'dashboard.mostProfitableDay' | translate }} : {{ meilleurJour.jour }} — {{ 'dashboard.average' | translate }} : {{ formatMontant(meilleurJour.moyenne) }}
              </p>
            </div>
            <div class="stat-icon-large">
              <ion-icon name="star" color="tertiary"></ion-icon>
            </div>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Onglet: Articles -->
    <div class="tab-content" *ngIf="selectedTab === 'articles'">
      <!-- Articles les plus loués -->
      <ion-card class="stat-card stat-card-success">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="cube" slot="start"></ion-icon>
            {{ 'dashboard.mostRented' | translate }}
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list lines="none" class="articles-list" *ngIf="articlesPlusLoues.length > 0">
            <ion-item *ngFor="let item of articlesPlusLoues" class="article-item-dashboard">
              <!-- Image de l'article à gauche -->
              <img 
                *ngIf="item.article.photo" 
                [src]="item.article.photo" 
                [alt]="item.article.nomArticle"
                slot="start"
                class="article-image-dashboard"
                (error)="$event.target.src='assets/icon/placeholder-image.png'">
              <ion-icon 
                *ngIf="!item.article.photo" 
                name="image-outline" 
                slot="start" 
                class="article-placeholder-icon-dashboard">
              </ion-icon>
              
              <ion-label>
                <h2>
                  <ion-icon [name]="item.article.actif ? 'checkmark-circle' : 'close-circle'" 
                            [color]="item.article.actif ? 'success' : 'danger'"
                            style="margin-right: 8px; vertical-align: middle;"></ion-icon>
                  {{ item.article.nomArticle }}
                </h2>
                <div class="badges-container">
                  <ion-badge color="primary">
                    {{ getCategorieName(item.article.idCategorie) }}
                  </ion-badge>
                  <ion-badge *ngIf="item.article.idTaille" color="secondary">
                    {{ 'dashboard.size' | translate }}: {{ getTailleLabel(item.article.idTaille) }}
                  </ion-badge>
                  <ion-badge [color]="item.article.actif ? 'success' : 'danger'">
                    <ion-icon [name]="item.article.actif ? 'checkmark-circle' : 'close-circle'" style="margin-right: 4px;"></ion-icon>
                    {{ item.article.actif ? ('dashboard.active' | translate) : ('dashboard.inactive' | translate) }}
                  </ion-badge>
                  <ion-badge color="success">
                    {{ item.nombreLocations }} {{ 'dashboard.rentals' | translate }}
                  </ion-badge>
                </div>
                <p style="margin-top: 0.5rem; color: var(--ion-color-medium);">
                  {{ 'dashboard.rentalPrice' | translate }}: {{ item.article.prixLocationBase }} MAD{{ 'dashboard.perDay' | translate }} | {{ 'dashboard.advance' | translate }}: {{ item.article.prixAvanceBase }} MAD
                </p>
              </ion-label>
            </ion-item>
          </ion-list>
          <div class="no-data" *ngIf="articlesPlusLoues.length === 0">
            <p>{{ 'dashboard.noRentedArticles' | translate }}</p>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Article le plus rentable -->
      <ion-card class="stat-card stat-card-warning">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="trending-up" slot="start"></ion-icon>
            {{ 'dashboard.mostProfitable' | translate }}
          </ion-card-title>
        </ion-card-header>
        <ion-card-content *ngIf="articlePlusRentable.article.nomArticle !== 'N/A'">
          <ion-item class="article-item-dashboard">
            <!-- Image de l'article à gauche -->
            <img 
              *ngIf="articlePlusRentable.article.photo" 
              [src]="articlePlusRentable.article.photo" 
              [alt]="articlePlusRentable.article.nomArticle"
              slot="start"
              class="article-image-dashboard"
              (error)="$event.target.src='assets/icon/placeholder-image.png'">
            <ion-icon 
              *ngIf="!articlePlusRentable.article.photo" 
              name="image-outline" 
              slot="start" 
              class="article-placeholder-icon-dashboard">
            </ion-icon>
            
            <ion-label>
              <h2>
                <ion-icon [name]="articlePlusRentable.article.actif ? 'checkmark-circle' : 'close-circle'" 
                          [color]="articlePlusRentable.article.actif ? 'success' : 'danger'"
                          style="margin-right: 8px; vertical-align: middle;"></ion-icon>
                {{ articlePlusRentable.article.nomArticle }}
              </h2>
              <div class="badges-container">
                <ion-badge color="primary">
                  {{ getCategorieName(articlePlusRentable.article.idCategorie) }}
                </ion-badge>
                <ion-badge *ngIf="articlePlusRentable.article.idTaille" color="secondary">
                  {{ 'dashboard.size' | translate }}: {{ getTailleLabel(articlePlusRentable.article.idTaille) }}
                </ion-badge>
                <ion-badge [color]="articlePlusRentable.article.actif ? 'success' : 'danger'">
                  <ion-icon [name]="articlePlusRentable.article.actif ? 'checkmark-circle' : 'close-circle'" style="margin-right: 4px;"></ion-icon>
                  {{ articlePlusRentable.article.actif ? ('dashboard.active' | translate) : ('dashboard.inactive' | translate) }}
                </ion-badge>
                <ion-badge color="warning">
                  {{ formatMontant(articlePlusRentable.revenus) }}
                </ion-badge>
              </div>
              <p style="margin-top: 0.5rem; color: var(--ion-color-medium);">
                {{ 'dashboard.rentalPrice' | translate }}: {{ articlePlusRentable.article.prixLocationBase }} MAD{{ 'dashboard.perDay' | translate }} | {{ 'dashboard.advance' | translate }}: {{ articlePlusRentable.article.prixAvanceBase }} MAD
              </p>
              <p style="margin-top: 0.25rem; color: var(--ion-color-success); font-weight: 600;">
                {{ 'dashboard.revenueThisMonth' | translate }}: {{ formatMontant(articlePlusRentable.revenus) }}
              </p>
            </ion-label>
          </ion-item>
        </ion-card-content>
        <ion-card-content *ngIf="articlePlusRentable.article.nomArticle === 'N/A'">
          <div class="no-data">
            <p>{{ 'dashboard.noProfitableArticle' | translate }}</p>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Catégorie la plus demandée -->
      <ion-card class="stat-card stat-card-secondary">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="grid" slot="start"></ion-icon>
            {{ 'dashboard.mostRequestedCategory' | translate }}
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="stat-content-large">
            <div class="stat-value">
              <h2 class="categorie-nom">{{ categoriePlusDemandee.nomCategorie }}</h2>
              <h1>{{ categoriePlusDemandee.nombreReservations }}</h1>
              <p class="stat-description">
                {{ categoriePlusDemandee.nombreReservations }} {{ 'dashboard.reservationsInCategory' | translate }}
              </p>
            </div>
            <div class="stat-icon-large">
              <ion-icon name="grid" color="medium"></ion-icon>
            </div>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Onglet: Articles Entrants -->
    <div class="tab-content" *ngIf="selectedTab === 'entrants'">
      <!-- Filtres pour les articles entrants -->
      <ion-card class="filter-card">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="calendar" slot="start"></ion-icon>
            {{ 'dashboard.filterIncoming' | translate }}
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <!-- Type de filtre -->
          <ion-segment [value]="filterTypeEntrants" (ionChange)="onFilterTypeEntrantsChange($event)" class="filter-segment">
            <ion-segment-button value="jour">
              <ion-icon name="calendar"></ion-icon>
              <ion-label>{{ 'dashboard.singleDay' | translate }}</ion-label>
            </ion-segment-button>
            <ion-segment-button value="periode">
              <ion-icon name="bar-chart"></ion-icon>
              <ion-label>{{ 'dashboard.period' | translate }}</ion-label>
            </ion-segment-button>
          </ion-segment>

          <!-- Filtre par jour unique -->
          <div class="filter-content" *ngIf="filterTypeEntrants === 'jour'">
            <ion-item lines="full" class="filter-item">
              <ion-label position="stacked">{{ 'dashboard.selectDate' | translate }}</ion-label>
              <ion-input
                type="date"
                [value]="selectedDateEntrants"
                (ionInput)="selectedDateEntrants = $event.detail.value ?? selectedDateEntrants; onEntrantsDateChange()"
                [placeholder]="'dashboard.selectDate' | translate">
              </ion-input>
            </ion-item>
            <p class="filter-hint">{{ 'dashboard.incomingOn' | translate }} {{ formatDate(selectedDateEntrants) }}</p>
          </div>

          <!-- Filtre par période -->
          <div class="filter-content" *ngIf="filterTypeEntrants === 'periode'">
            <ion-item lines="full" class="filter-item">
              <ion-label position="stacked">{{ 'dashboard.startDate' | translate }}</ion-label>
              <ion-input
                type="date"
                [value]="dateDebutEntrants"
                (ionInput)="dateDebutEntrants = $event.detail.value ?? dateDebutEntrants; onEntrantsPeriodeChange()"
                [placeholder]="'dashboard.startDate' | translate">
              </ion-input>
            </ion-item>
            <ion-item lines="full" class="filter-item">
              <ion-label position="stacked">{{ 'dashboard.endDate' | translate }}</ion-label>
              <ion-input
                type="date"
                [value]="dateFinEntrants"
                (ionInput)="dateFinEntrants = $event.detail.value ?? dateFinEntrants; onEntrantsPeriodeChange()"
                [placeholder]="'dashboard.endDate' | translate">
              </ion-input>
            </ion-item>
            <p class="filter-hint">
              {{ 'dashboard.incomingFromTo' | translate }} {{ formatDateShort(dateDebutEntrants) }} {{ 'dashboard.to' | translate }} {{ formatDateShort(dateFinEntrants) }}
            </p>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Articles entrants -->
      <ion-card class="stat-card stat-card-success">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="arrow-up" slot="start"></ion-icon>
            {{ 'dashboard.incomingArticles' | translate }}
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list lines="none" class="articles-list" *ngIf="articlesEntrants.length > 0">
            <ion-item *ngFor="let item of articlesEntrants" class="article-item">
              <!-- Photo de l'article -->
              <img 
                *ngIf="item.article.photo" 
                [src]="item.article.photo" 
                [alt]="item.article.nomArticle"
                slot="start"
                class="article-image"
                (error)="$event.target.src='assets/icon/placeholder-image.png'">
              <ion-icon 
                *ngIf="!item.article.photo" 
                name="image-outline" 
                slot="start" 
                class="article-placeholder-icon">
              </ion-icon>
              <ion-label>
                <h3>{{ item.article.nomArticle }}{{ item.article.couleur ? ' ' + item.article.couleur : '' }}</h3>
                <p>{{ 'dashboard.quantity' | translate }}: {{ item.quantite }} — {{ 'dashboard.returnOn' | translate }} {{ formatDateShort(item.dateRetour) }}</p>
              </ion-label>
              <ion-badge color="success" slot="end">{{ item.quantite }}</ion-badge>
            </ion-item>
          </ion-list>
          <div class="no-data" *ngIf="articlesEntrants.length === 0">
            <p>{{ 'dashboard.noIncomingArticles' | translate }}</p>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Onglet: Articles Sortants -->
    <div class="tab-content" *ngIf="selectedTab === 'sortants'">
      <!-- Filtres pour les articles sortants -->
      <ion-card class="filter-card">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="calendar" slot="start"></ion-icon>
            {{ 'dashboard.filterOutgoing' | translate }}
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <!-- Type de filtre -->
          <ion-segment [value]="filterTypeSortants" (ionChange)="onFilterTypeSortantsChange($event)" class="filter-segment">
            <ion-segment-button value="jour">
              <ion-icon name="calendar"></ion-icon>
              <ion-label>{{ 'dashboard.singleDay' | translate }}</ion-label>
            </ion-segment-button>
            <ion-segment-button value="periode">
              <ion-icon name="bar-chart"></ion-icon>
              <ion-label>{{ 'dashboard.period' | translate }}</ion-label>
            </ion-segment-button>
          </ion-segment>

          <!-- Filtre par jour unique -->
          <div class="filter-content" *ngIf="filterTypeSortants === 'jour'">
            <ion-item lines="full" class="filter-item">
              <ion-label position="stacked">{{ 'dashboard.selectDate' | translate }}</ion-label>
              <ion-input
                type="date"
                [value]="selectedDateSortants"
                (ionInput)="selectedDateSortants = $event.detail.value ?? selectedDateSortants; onSortantsDateChange()"
                [placeholder]="'dashboard.selectDate' | translate">
              </ion-input>
            </ion-item>
            <p class="filter-hint">{{ 'dashboard.outgoingOn' | translate }} {{ formatDate(selectedDateSortants) }}</p>
          </div>

          <!-- Filtre par période -->
          <div class="filter-content" *ngIf="filterTypeSortants === 'periode'">
            <ion-item lines="full" class="filter-item">
              <ion-label position="stacked">{{ 'dashboard.startDate' | translate }}</ion-label>
              <ion-input
                type="date"
                [value]="dateDebutSortants"
                (ionInput)="dateDebutSortants = $event.detail.value ?? dateDebutSortants; onSortantsPeriodeChange()"
                [placeholder]="'dashboard.startDate' | translate">
              </ion-input>
            </ion-item>
            <ion-item lines="full" class="filter-item">
              <ion-label position="stacked">{{ 'dashboard.endDate' | translate }}</ion-label>
              <ion-input
                type="date"
                [value]="dateFinSortants"
                (ionInput)="dateFinSortants = $event.detail.value ?? dateFinSortants; onSortantsPeriodeChange()"
                [placeholder]="'dashboard.endDate' | translate">
              </ion-input>
            </ion-item>
            <p class="filter-hint">
              {{ 'dashboard.outgoingFromTo' | translate }} {{ formatDateShort(dateDebutSortants) }} {{ 'dashboard.to' | translate }} {{ formatDateShort(dateFinSortants) }}
            </p>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Articles sortants -->
      <ion-card class="stat-card stat-card-danger">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="arrow-down" slot="start"></ion-icon>
            {{ 'dashboard.outgoingArticles' | translate }}
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list lines="none" class="articles-list" *ngIf="articlesSortants.length > 0">
            <ion-item *ngFor="let item of articlesSortants" class="article-item">
              <!-- Photo de l'article -->
              <img 
                *ngIf="item.article.photo" 
                [src]="item.article.photo" 
                [alt]="item.article.nomArticle"
                slot="start"
                class="article-image"
                (error)="$event.target.src='assets/icon/placeholder-image.png'">
              <ion-icon 
                *ngIf="!item.article.photo" 
                name="image-outline" 
                slot="start" 
                class="article-placeholder-icon">
              </ion-icon>
              <ion-label>
                <h3>{{ item.article.nomArticle }}{{ item.article.couleur ? ' ' + item.article.couleur : '' }}</h3>
                <p>{{ 'dashboard.quantity' | translate }}: {{ item.quantite }} — {{ 'dashboard.exitOn' | translate }} {{ formatDateShort(item.dateSortie) }}</p>
              </ion-label>
              <ion-badge color="danger" slot="end">{{ item.quantite }}</ion-badge>
            </ion-item>
          </ion-list>
          <div class="no-data" *ngIf="articlesSortants.length === 0">
            <p>{{ 'dashboard.noOutgoingArticles' | translate }}</p>
          </div>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
</ion-content>
